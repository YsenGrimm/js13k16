!function(t){function s(e){if(i[e])return i[e].exports;var h=i[e]={exports:{},id:e,loaded:!1};return t[e].call(h.exports,h,h.exports,s),h.loaded=!0,h.exports}var i={};return s.m=t,s.c=i,s.p="",s(0)}([function(t,s,i){"use strict";var e=i(1);new e.Game},function(t,s,i){"use strict";var e=i(2),h=i(4),a=i(5),n=i(3),r=function(){function t(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.w=800,this.h=480,this.bgColor="#533B59",this.collisionOffset=5,this.layer=6,this.cells=16,this.players=new Array,this.players[0]=new e.Player(0,this.ctx,this.layer,"#F28963",0,this.w,this.h),this.players[1]=new e.Player(1,this.ctx,this.layer,"#F2D680",2,this.w,this.h),this.enemies=new Array,this.enemyIds=0;for(var t=0;t<10;t++)this.enemies.push(new h.Enemy((this.enemyIds++),this.ctx,this.layer,this.w,this.h));this.scanline=new a.Scanline(this.ctx,this.w,this.h),this.update=this.update.bind(this),window.requestAnimationFrame(this.update)}return t.prototype.update=function(){var t=this;this.scanline.update();for(var s=0;s<this.enemies.length;s++)this.enemies[s].update(),Math.abs(this.enemies[s].realPos-this.scanline.scanlinePos)<2&&(this.enemies[s].alpha=1);for(var s=0;s<this.players.length;s++)for(var i=function(i){e.players[s].pos===e.enemies[i].layer&&Math.abs(e.players[s].axisPool[e.players[s].axis]-e.enemies[i].angle)<e.collisionOffset&&(e.players[s].score++,e.enemies=e.enemies.filter(function(s){return s!==t.enemies[i]}),e.enemies.push(new h.Enemy((e.enemyIds++),e.ctx,e.layer,e.w,e.h)))},e=this,a=0;a<this.enemies.length;a++)i(a);this.draw(),window.requestAnimationFrame(this.update)},t.prototype.draw=function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.w,this.h),this.drawBoard(),this.scanline.render();for(var t=0;t<this.enemies.length;t++)this.enemies[t].render();for(var t=0;t<this.players.length;t++)this.players[t].render();this.ctx.font="18px sans-serif",this.ctx.fillStyle="#F28963",this.ctx.fillText(this.players[0].score.toString(),30,40),this.ctx.fillStyle="#F2D680",this.ctx.fillText(this.players[1].score.toString(),this.w-40,40)},t.prototype.drawBoard=function(){this.ctx.strokeStyle="#D95970";for(var t=50,s=30,i=0;i<this.layer+1;i++)this.ctx.beginPath(),this.ctx.arc(this.w/2,this.h/2,t+s*i,0,2*Math.PI),this.ctx.stroke();this.ctx.fillStyle="#D95970",this.ctx.beginPath(),this.ctx.arc(this.w/2,this.h/2,t,0,2*Math.PI),this.ctx.fill(),this.drawDebugLines()},t.prototype.drawDebugLines=function(){this.ctx.strokeStyle="#D95970";for(var t=360/this.cells,s=0;s<this.cells;s++)this.ctx.beginPath(),this.ctx.moveTo(this.w/2,this.h/2),this.ctx.lineTo(230*Math.cos(n.Utils.deg2rad(s*t))+this.w/2,230*Math.sin(n.Utils.deg2rad(s*t))+this.h/2),this.ctx.stroke()},t}();s.Game=r},function(t,s,i){"use strict";var e=i(3),h=function(){function t(t,s,i,e,h,a,n){this.id=t,this.ctx=s,this.color=e,this.pos=0,this.axis=h,this.axisPool=[0,90,180,270],this.maxPos=i-1,this.minOffset=64,this.offset=30,this.size=6,this.width=30,this.height=3,this.score=0,this.gameWidth=a,this.gameHeigth=n,this.handleInput=this.handleInput.bind(this),document.addEventListener("keydown",this.handleInput)}return t.prototype.handleInput=function(t){switch(this.id){case 0:"ArrowLeft"===t.key&&(this.pos--,this.pos<0&&(this.pos=0)),"ArrowRight"===t.key&&(this.pos++,this.pos>this.maxPos&&(this.pos=this.maxPos)),"ArrowUp"===t.key&&(this.axis--,this.axis<0&&(this.axis=3)),"ArrowDown"===t.key&&(this.axis++,this.axis>3&&(this.axis=0));break;case 1:"a"===t.key&&(this.pos--,this.pos<0&&(this.pos=0)),"d"===t.key&&(this.pos++,this.pos>this.maxPos&&(this.pos=this.maxPos)),"w"===t.key&&(this.axis--,this.axis<0&&(this.axis=3)),"s"===t.key&&(this.axis++,this.axis>3&&(this.axis=0))}},t.prototype.update=function(){},t.prototype.render=function(){this.ctx.fillStyle=this.color,Math.abs(Math.cos(e.Utils.deg2rad(this.axisPool[this.axis])))>.5?this.ctx.fillRect(Math.cos(e.Utils.deg2rad(this.axisPool[this.axis]))*(1+this.minOffset+this.offset*this.pos)+this.gameWidth/2-this.width/2,Math.sin(e.Utils.deg2rad(this.axisPool[this.axis]))*(this.minOffset+this.offset*this.pos)+this.gameHeigth/2-this.height/2,this.width,this.height):this.ctx.fillRect(Math.cos(e.Utils.deg2rad(this.axisPool[this.axis]))*(1+this.minOffset+this.offset*this.pos)+this.gameWidth/2-this.height/2,Math.sin(e.Utils.deg2rad(this.axisPool[this.axis]))*(this.minOffset+this.offset*this.pos)+this.gameHeigth/2-this.width/2,this.height,this.width)},t}();s.Player=h},function(t,s){"use strict";var i=function(){function t(){}return t.deg2rad=function(t){return t*(Math.PI/180)},t.getRandomInt=function(t,s){return Math.floor(Math.random()*(s-t+1))+t},t.getRandomArbitrary=function(t,s){return Math.random()*(s-t)+t},t}();s.Utils=i},function(t,s,i){"use strict";var e=i(3),h=function(){function t(t,s,i,h,a){this.id=t,this.ctx=s,this.layer=e.Utils.getRandomInt(0,5),this.maxLayer=i-1,this.angle=e.Utils.getRandomArbitrary(0,360),this.minOffset=64,this.offset=30,this.size=6,this.speed=e.Utils.getRandomArbitrary(1,4),this.realPos=this.minOffset+this.offset*this.layer,this.alpha=1,this.fade=.006,this.fadeDelay=2*this.speed,this.w=h,this.h=a}return t.prototype.update=function(){this.angle+=this.speed,this.angle%=360,this.fadeDelay--,this.fadeDelay<0&&(this.alpha-=this.fade,this.alpha<0&&(this.alpha=0,this.fadeDelay=5))},t.prototype.render=function(){this.ctx.fillStyle="rgba(217, 91, 91, "+this.alpha+")",this.ctx.beginPath(),this.ctx.arc(Math.cos(e.Utils.deg2rad(this.angle))*(this.minOffset+this.offset*this.layer)+this.w/2,Math.sin(e.Utils.deg2rad(this.angle))*(this.minOffset+this.offset*this.layer)+this.h/2,this.size,0,2*Math.PI),this.ctx.fill()},t}();s.Enemy=h},function(t,s){"use strict";var i=function(){function t(t,s,i){this.ctx=t,this.scanlineStart=30,this.scanlineEnd=240,this.scanlinePos=this.scanlineStart,this.scanlineSpeed=1.5,this.w=s,this.h=i}return t.prototype.update=function(){this.scanlinePos+=this.scanlineSpeed,this.scanlinePos>this.scanlineEnd&&(this.scanlinePos=this.scanlineStart)},t.prototype.render=function(){this.ctx.strokeStyle="#D95970",this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.arc(this.w/2,this.h/2,this.scanlinePos,0,2*Math.PI),this.ctx.stroke(),this.ctx.lineWidth=1},t}();s.Scanline=i}]);
//# sourceMappingURL=game.js.map